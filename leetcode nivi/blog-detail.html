// script.js

// Select elements
const commentForm = document.getElementById('comment-form');
const commenterInput = document.getElementById('commenter');
const commentTextInput = document.getElementById('comment-text');
const commentList = document.getElementById('comment-list');

// Load saved comments from localStorage
let comments = JSON.parse(localStorage.getItem('comments')) || [];
comments.forEach((comment, index) => addCommentToDOM(comment.name, comment.text, comment.time, index));

// Handle form submission
commentForm.addEventListener('submit', (e) => {
  e.preventDefault();

  const name = commenterInput.value.trim();
  const text = commentTextInput.value.trim();

  if (!name || !text) return;

  const now = new Date();
  const timestamp = `${now.getMonth() + 1}/${now.getDate()}/${now.getFullYear()} ${now.getHours()}:${now.getMinutes()}:${now.getSeconds()}`;

  const comment = { name, text, time: timestamp };
  
  // Save to localStorage
  comments.push(comment);
  localStorage.setItem('comments', JSON.stringify(comments));

  // Add comment to DOM
  addCommentToDOM(name, text, timestamp, comments.length - 1);

  // Reset form
  commentForm.reset();
});

// Function to add comment to the DOM
function addCommentToDOM(name, text, time, index) {
  const li = document.createElement('li');
  li.innerHTML = `
    <strong>${name}</strong> <span>(${time})</span><br>${text}
    <button class="delete-btn" data-index="${index}">Delete</button>
  `;
  commentList.appendChild(li);

  // Add delete functionality
  li.querySelector('.delete-btn').addEventListener('click', () => {
    comments.splice(index, 1); // Remove from array
    localStorage.setItem('comments', JSON.stringify(comments)); // Update localStorage
    commentList.innerHTML = ''; // Clear the list
    comments.forEach((c, i) => addCommentToDOM(c.name, c.text, c.time, i)); // Re-render
  });
}
